<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/font-roboto/roboto.html">



<polymer-element name="calendar-widget" attributes="websocketMessage">
	<template>
	<link rel="stylesheet" href="calendar-widget.css">


	<div id="container">
		<div class="date small dimmed">Tuesday, August 26 2014</div>
		<div class="time">{{time | parseHHMM}}<span class="sec">{{time | parseSS}}</span></div>
		<div class="calendar xxsmall" style="display: block;">
			<table class="xsmall calendar-table">
				<tbody>
					<tr style="opacity: 1;">
						<td class="description">Apple Keynote</td>
						<td class="days dimmed">in 14 days</td>
					</tr>
					<tr style="opacity: 0.8;">
						<td class="description">Lancering iPhone 6</td>
						<td class="days dimmed">in 23 days</td>
					</tr>
					<tr style="opacity: 0.6000000000000001;">
						<td class="description">Sinterklaas</td>
						<td class="days dimmed">in 3 months</td>
					</tr>
					<tr style="opacity: 0.4000000000000001;">
						<td class="description">Kerstmis</td>
						<td class="days dimmed">in 4 months</td>
					</tr>
					<tr style="opacity: 0.20000000000000007;">
						<td class="description">Oud &amp; Nieuw</td>
						<td class="days dimmed">in 4 months</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

  </template>
  <script>

  (function() {

	Polymer('calendar-widget', {
		time: new Date(),
		websocketMessage:{},
		//ready: function(){
			//this.refreshAjax();
		//},
		websocketMessageChanged: function(){
			return;
			switch(this.websocketMessage.type){
				case 'temp':
					this.$.temp.innerHTML=this.websocketMessage.data;
					break;
				case 'sunset':
					this.$.sunset.innerHTML=this.websocketMessage.data;
					break;
				case 'sunrise':
					this.$.sunrise.innerHTML=this.websocketMessage.data;
					break;
				case 'weather':
					this.weatherData = this.websocketMessage.data;
					break;
			}
		},
		attached: function() {
			// when we are inserted into DOM, start watching the time
			this.updateTime();
			this.interval = setInterval(this.updateTime.bind(this), 1000);
		},
		detached: function() {
			clearInterval(this.interval);
		},
		updateTime: function() {
			this.time = new Date();
		},
		parseHHMM: function(time){
			return time.getHours()+':'+time.getMinutes();
		},
		parseSS: function(time){
			return time.getSeconds();
		}
	});

})();
</script>
</polymer-element>
